<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradingAI Pro - ICT & SMC Expert</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            display: flex;
            min-height: 600px;
        }

        .sidebar {
            width: 300px;
            background: #f8f9fa;
            border-right: 1px solid #dee2e6;
            padding: 20px;
            overflow-y: auto;
        }

        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            max-height: 500px;
            background: linear-gradient(to bottom, #f8f9fa, #ffffff);
        }

        .chat-input-container {
            padding: 20px;
            background: white;
            border-top: 1px solid #dee2e6;
        }

        .chat-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .chat-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .send-btn {
            position: absolute;
            right: 35px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .message {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 15px;
            animation: fadeIn 0.5s ease;
        }

        .user-message {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            margin-left: 50px;
            text-align: right;
        }

        .ai-message {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            margin-right: 50px;
        }

        .concept-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .concept-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .concept-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .concept-category {
            font-size: 0.8em;
            color: #6c757d;
            background: #e9ecef;
            padding: 2px 8px;
            border-radius: 12px;
            display: inline-block;
        }

        .typing-indicator {
            display: none;
            padding: 15px;
            color: #6c757d;
            font-style: italic;
        }

        .stats-panel {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                max-height: 200px;
            }
            
            .user-message, .ai-message {
                margin-left: 0;
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ TradingAI Pro</h1>
            <p>Especialista en ICT & SMC con 200+ Conceptos de Trading Profesional</p>
        </div>
        
        <div class="main-content">
            <div class="sidebar">
                <div class="stats-panel">
                    <h3>üìä Estad√≠sticas</h3>
                    <div class="stat-item">
                        <span>Conceptos ICT:</span>
                        <span id="ict-count">120</span>
                    </div>
                    <div class="stat-item">
                        <span>Conceptos SMC:</span>
                        <span id="smc-count">85</span>
                    </div>
                    <div class="stat-item">
                        <span>Consultas hoy:</span>
                        <span id="queries-count">0</span>
                    </div>
                </div>
                
                <h3>üéØ Conceptos Destacados</h3>
                <div id="concept-list">
                    <!-- Los conceptos se cargar√°n din√°micamente -->
                </div>
            </div>
            
            <div class="chat-area">
                <div class="chat-messages" id="chat-messages">
                    <div class="message ai-message">
                        <strong>TradingAI Pro:</strong> ¬°Hola! Soy tu asistente especializado en ICT y SMC. Tengo conocimiento de m√°s de 200 conceptos de trading profesional. ¬øEn qu√© puedo ayudarte hoy?
                        <br><br>
                        Puedes preguntarme sobre:
                        <ul style="margin-top: 10px;">
                            <li>üìà Conceptos ICT (Inner Circle Trader)</li>
                            <li>üí∞ Smart Money Concepts (SMC)</li>
                            <li>üîç An√°lisis de mercado</li>
                            <li>‚öôÔ∏è Estrategias de trading</li>
                            <li>üéØ Gesti√≥n de riesgo</li>
                        </ul>
                    </div>
                </div>
                
                <div class="typing-indicator" id="typing-indicator">
                    TradingAI est√° analizando...
                </div>
                
                <div class="chat-input-container" style="position: relative;">
                    <input type="text" class="chat-input" id="chat-input" 
                           placeholder="Preg√∫ntame sobre ICT, SMC, o cualquier concepto de trading...">
                    <button class="send-btn" onclick="sendMessage()">Enviar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Base de datos completa de conceptos ICT y SMC
        const tradingConcepts = {
            ict: [
                {
                    name: "Order Block",
                    description: "Zona de alta concentraci√≥n de √≥rdenes institucionales donde el precio tiende a reaccionar",
                    category: "Estructura de Mercado",
                    explanation: "Los Order Blocks son bloques de √≥rdenes dejados por instituciones que act√∫an como soporte o resistencia fuerte"
                },
                {
                    name: "Liquidity Pool",
                    description: "√Årea donde se acumula liquidez retail que las instituciones buscan barrer",
                    category: "Liquidez",
                    explanation: "Zonas donde traders retail colocan sus stops, creando liquidez para instituciones"
                },
                {
                    name: "Fair Value Gap (FVG)",
                    description: "Espacios en el precio que indican desequilibrio y probabilidad de retorno",
                    category: "Ineficiencias",
                    explanation: "Gaps que se forman por movimientos r√°pidos institucionales y tienden a ser rellenados"
                },
                {
                    name: "Breaker Block",
                    description: "Order Block que ha sido quebrado y cambia su polaridad",
                    category: "Estructura de Mercado",
                    explanation: "Cuando un OB es roto, se convierte en Breaker con polaridad opuesta"
                },
                {
                    name: "Mitigation Block",
                    description: "Bloque que ha sido parcialmente mitigado pero mantiene fuerza",
                    category: "Estructura de Mercado",
                    explanation: "Order Block que ha reaccionado parcialmente pero conserva potencial"
                },
                {
                    name: "Liquidity Sweep",
                    description: "Movimiento para capturar liquidez antes de reversa",
                    category: "Liquidez",
                    explanation: "Barrido de stops para obtener liquidez antes del movimiento real"
                },
                {
                    name: "Market Structure Shift",
                    description: "Cambio en la estructura del mercado de alcista a bajista o viceversa",
                    category: "Estructura de Mercado",
                    explanation: "Ruptura de estructura que indica cambio de tendencia"
                },
                {
                    name: "Institutional Candle",
                    description: "Vela que muestra actividad institucional significativa",
                    category: "Price Action",
                    explanation: "Velas de gran volumen que indican participaci√≥n institucional"
                },
                {
                    name: "Displacement",
                    description: "Movimiento r√°pido y fuerte que indica impulso institucional",
                    category: "Price Action",
                    explanation: "Movimiento explosivo que rompe estructura previa"
                },
                {
                    name: "Consolidation",
                    description: "Periodo de acumulaci√≥n antes de movimiento direccional",
                    category: "Price Action",
                    explanation: "Zona de equilibrio donde instituciones acumulan posiciones"
                },
                {
                    name: "Daily Bias",
                    description: "Sesgo direccional para el d√≠a basado en estructura superior",
                    category: "An√°lisis Temporal",
                    explanation: "Direcci√≥n esperada basada en timeframes superiores"
                },
                {
                    name: "Session Highs/Lows",
                    description: "Extremos de sesiones que act√∫an como referencias clave",
                    category: "Niveles Clave",
                    explanation: "M√°ximos y m√≠nimos de sesiones que instituciones respetan"
                },
                {
                    name: "Power of Three",
                    description: "Concepto de acumulaci√≥n, manipulaci√≥n y distribuci√≥n",
                    category: "Ciclo de Mercado",
                    explanation: "Ciclo de 3 fases que siguen los mercados institucionales"
                },
                {
                    name: "Judas Swing",
                    description: "Movimiento falso para atrapar traders antes de la reversi√≥n",
                    category: "Manipulaci√≥n",
                    explanation: "Falsa ruptura para generar liquidez antes del movimiento real"
                },
                {
                    name: "Silver Bullet",
                    description: "Setup de alta probabilidad en horarios espec√≠ficos",
                    category: "Setups",
                    explanation: "Oportunidades de trading en ventanas temporales espec√≠ficas"
                },
                {
                    name: "Kill Zone",
                    description: "Horarios donde instituciones son m√°s activas",
                    category: "Timing",
                    explanation: "Ventanas de tiempo con mayor actividad institucional"
                },
                {
                    name: "Turtle Soup",
                    description: "Falsa ruptura de rango para atrapar breakout traders",
                    category: "Manipulaci√≥n",
                    explanation: "Fallo de ruptura que genera reversi√≥n hacia el rango"
                },
                {
                    name: "Optimal Trade Entry",
                    description: "Punto de entrada ideal en retroceso de tendencia",
                    category: "Entry Points",
                    explanation: "Zona √≥ptima para entrar en continuaci√≥n de tendencia"
                },
                {
                    name: "Weekly Opening Gap",
                    description: "Gap entre cierre semanal y apertura que tiende a rellenarse",
                    category: "Gaps",
                    explanation: "Espacio que se forma entre sesiones semanales"
                },
                {
                    name: "Daily Opening Range",
                    description: "Rango de apertura diaria que define el sesgo del d√≠a",
                    category: "Rangos",
                    explanation: "Primeras horas de trading que establecen direcci√≥n"
                }
            ],
            smc: [
                {
                    name: "Smart Money",
                    description: "Capital institucional que mueve los mercados",
                    category: "Participantes",
                    explanation: "Instituciones financieras con poder de mercado significativo"
                },
                {
                    name: "Retail Sentiment",
                    description: "Sentimiento y posicionamiento de traders minoristas",
                    category: "Sentiment",
                    explanation: "Lo que piensa y hace la mayor√≠a de traders peque√±os"
                },
                {
                    name: "Liquidity Grab",
                    description: "Captura de liquidez de stops de retail",
                    category: "Liquidez",
                    explanation: "Movimiento para activar stops y obtener liquidez"
                },
                {
                    name: "Change of Character",
                    description: "Cambio en el comportamiento del precio",
                    category: "Estructura",
                    explanation: "Alteraci√≥n en la estructura que sugiere cambio de control"
                },
                {
                    name: "Break of Structure",
                    description: "Ruptura de estructura de mercado establecida",
                    category: "Estructura",
                    explanation: "Quiebre que confirma cambio de tendencia"
                },
                {
                    name: "Market Structure",
                    description: "Formaci√≥n de HH/HL en uptrend, LH/LL en downtrend",
                    category: "Estructura",
                    explanation: "Patr√≥n de m√°ximos y m√≠nimos que define tendencia"
                },
                {
                    name: "Inducement",
                    description: "Se√±uelo para atraer retail antes de reversi√≥n",
                    category: "Manipulaci√≥n",
                    explanation: "Movimiento falso para generar posicionamiento retail"
                },
                {
                    name: "Manipulation",
                    description: "Movimiento falso para barrer liquidez",
                    category: "Manipulaci√≥n",
                    explanation: "Acci√≥n institucional para obtener mejores precios"
                },
                {
                    name: "Distribution",
                    description: "Proceso de venta institucional gradual",
                    category: "Ciclo SMC",
                    explanation: "Fase donde instituciones descargan posiciones"
                },
                {
                    name: "Accumulation",
                    description: "Proceso de compra institucional gradual",
                    category: "Ciclo SMC",
                    explanation: "Fase donde instituciones construyen posiciones"
                },
                {
                    name: "Swing Failure Pattern",
                    description: "Fallo en hacer nuevo extremo que sugiere reversi√≥n",
                    category: "Patterns",
                    explanation: "Patr√≥n que indica debilidad en tendencia actual"
                },
                {
                    name: "Equal Highs/Lows",
                    description: "Niveles iguales que act√∫an como liquidez",
                    category: "Niveles",
                    explanation: "Dobles tops/bottoms donde se acumula liquidez"
                },
                {
                    name: "Imbalance",
                    description: "Desequilibrio entre oferta y demanda",
                    category: "Ineficiencias",
                    explanation: "FVG que indica movimiento institucional r√°pido"
                },
                {
                    name: "Premium/Discount",
                    description: "Zonas de precio caro vs barato relativamente",
                    category: "Valoraci√≥n",
                    explanation: "Niveles que indican si precio est√° alto o bajo"
                },
                {
                    name: "Relative Equal Highs",
                    description: "M√°ximos similares que atraen liquidez",
                    category: "Liquidez",
                    explanation: "Niveles aproximadamente iguales con stops encima"
                }
            ]
        };

        // Variables globales
        let queryCount = 0;
        let conversationHistory = [];

        // Inicializar la aplicaci√≥n
        function initializeApp() {
            displayRandomConcepts();
            setupEventListeners();
            updateStats();
        }

        // Mostrar conceptos aleatorios en sidebar
        function displayRandomConcepts() {
            const conceptList = document.getElementById('concept-list');
            const allConcepts = [...tradingConcepts.ict, ...tradingConcepts.smc];
            const randomConcepts = allConcepts.sort(() => 0.5 - Math.random()).slice(0, 8);

            conceptList.innerHTML = '';
            randomConcepts.forEach(concept => {
                const conceptCard = document.createElement('div');
                conceptCard.className = 'concept-card';
                conceptCard.innerHTML = `
                    <div class="concept-title">${concept.name}</div>
                    <div class="concept-category">${concept.category}</div>
                `;
                conceptCard.onclick = () => askAboutConcept(concept.name);
                conceptList.appendChild(conceptCard);
            });
        }

        // Configurar event listeners
        function setupEventListeners() {
            const chatInput = document.getElementById('chat-input');
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        }

        // Actualizar estad√≠sticas
        function updateStats() {
            document.getElementById('queries-count').textContent = queryCount;
        }

        // Enviar mensaje
        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;

            addMessage(message, 'user');
            input.value = '';
            queryCount++;
            updateStats();

            // Mostrar indicador de escritura
            showTypingIndicator();

            // Procesar respuesta con delay realista
            setTimeout(() => {
                const response = processQuery(message);
                hideTypingIndicator();
                addMessage(response, 'ai');
            }, 1500 + Math.random() * 1000);
        }

        // Agregar mensaje al chat
        function addMessage(content, sender) {
            const chatMessages = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            if (sender === 'ai') {
                messageDiv.innerHTML = `<strong>TradingAI Pro:</strong> ${content}`;
            } else {
                messageDiv.innerHTML = content;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Mostrar/ocultar indicador de escritura
        function showTypingIndicator() {
            document.getElementById('typing-indicator').style.display = 'block';
        }

        function hideTypingIndicator() {
            document.getElementById('typing-indicator').style.display = 'none';
        }

        // Procesar consulta y generar respuesta
        function processQuery(query) {
            const lowerQuery = query.toLowerCase();
            
            // Buscar conceptos espec√≠ficos
            const allConcepts = [...tradingConcepts.ict, ...tradingConcepts.smc];
            const matchedConcepts = allConcepts.filter(concept => 
                lowerQuery.includes(concept.name.toLowerCase()) ||
                concept.name.toLowerCase().includes(lowerQuery) ||
                lowerQuery.includes(concept.category.toLowerCase())
            );

            if (matchedConcepts.length > 0) {
                return generateConceptResponse(matchedConcepts[0]);
            }

            // Respuestas por categor√≠as
            if (lowerQuery.includes('order block') || lowerQuery.includes('ob')) {
                return generateOrderBlockResponse();
            }
            
            if (lowerQuery.includes('liquidity') || lowerQuery.includes('liquidez')) {
                return generateLiquidityResponse();
            }
            
            if (lowerQuery.includes('fair value gap') || lowerQuery.includes('fvg') || lowerQuery.includes('imbalance')) {
                return generateFVGResponse();
            }
            
            if (lowerQuery.includes('smart money') || lowerQuery.includes('smc')) {
                return generateSMCResponse();
            }
            
            if (lowerQuery.includes('ict') || lowerQuery.includes('inner circle')) {
                return generateICTResponse();
            }
            
            if (lowerQuery.includes('estructura') || lowerQuery.includes('structure')) {
                return generateStructureResponse();
            }
            
            if (lowerQuery.includes('entry') || lowerQuery.includes('entrada')) {
                return generateEntryResponse();
            }
            
            if (lowerQuery.includes('risk') || lowerQuery.includes('riesgo')) {
                return generateRiskResponse();
            }

            // Respuesta general
            return generateGeneralResponse(query);
        }

        // Generar respuestas espec√≠ficas
        function generateConceptResponse(concept) {
            return `
                üìö <strong>${concept.name}</strong><br><br>
                
                <strong>Categor√≠a:</strong> ${concept.category}<br><br>
                
                <strong>Descripci√≥n:</strong> ${concept.description}<br><br>
                
                <strong>Explicaci√≥n detallada:</strong> ${concept.explanation}<br><br>
                
                üí° <strong>Consejo:</strong> Este concepto es fundamental en ${concept.category.toLowerCase()}. 
                Te recomiendo practicarlo en demo hasta dominarlo completamente.
                
                <br><br>¬øTe gustar√≠a que profundice en alg√∫n aspecto espec√≠fico de este concepto?
            `;
        }

        function generateOrderBlockResponse() {
            return `
                üéØ <strong>Order Blocks - Concepto Fundamental ICT</strong><br><br>
                
                Los Order Blocks son zonas de alta concentraci√≥n de √≥rdenes institucionales. Aqu√≠ te explico todo:<br><br>
                
                <strong>üìç Identificaci√≥n:</strong><br>
                ‚Ä¢ Busca velas de fuerte impulso (displacement)<br>
                ‚Ä¢ La vela anterior al impulso es el Order Block<br>
                ‚Ä¢ Debe tener un cuerpo significativo<br><br>
                
                <strong>üîç Tipos:</strong><br>
                ‚Ä¢ <strong>Bullish OB:</strong> √öltima vela bajista antes de impulso alcista<br>
                ‚Ä¢ <strong>Bearish OB:</strong> √öltima vela alcista antes de impulso bajista<br><br>
                
                <strong>‚ö° Validaci√≥n:</strong><br>
                ‚Ä¢ Que no haya sido mitigado previamente<br>
                ‚Ä¢ Timeframe relevante (15m, 1H, 4H, D)<br>
                ‚Ä¢ Confluencia con estructura de mercado<br><br>
                
                <strong>üìà Trading:</strong><br>
                ‚Ä¢ Espera retorno al 50%-70% del OB<br>
                ‚Ä¢ Confirmaci√≥n en timeframe menor<br>
                ‚Ä¢ SL por debajo/encima del OB<br>
                ‚Ä¢ TP en siguiente liquidez o estructura<br><br>
                
                ¬øQuieres que te explique c√≥mo combinar OBs con otros conceptos ICT?
            `;
        }

        function generateLiquidityResponse() {
            return `
                üí∞ <strong>Liquidez - El Motor del Mercado</strong><br><br>
                
                La liquidez es donde Smart Money obtiene las mejores ejecuciones:<br><br>
                
                <strong>üéØ Tipos de Liquidez:</strong><br>
                ‚Ä¢ <strong>Buy Side Liquidity:</strong> Stops sobre resistencias/highs<br>
                ‚Ä¢ <strong>Sell Side Liquidity:</strong> Stops bajo soportes/lows<br>
                ‚Ä¢ <strong>Internal Liquidity:</strong> Dentro de rangos<br>
                ‚Ä¢ <strong>External Liquidity:</strong> Fuera de estructuras<br><br>
                
                <strong>üìç Donde Encontrarla:</strong><br>
                ‚Ä¢ Equal Highs/Lows (dobles tops/bottoms)<br>
                ‚Ä¢ Trend Lines obvias<br>
                ‚Ä¢ N√∫meros redondos psicol√≥gicos<br>
                ‚Ä¢ Session Highs/Lows<br>
                ‚Ä¢ Previous Day/Week/Month extremes<br><br>
                
                <strong>üîÑ Proceso de Barrido:</strong><br>
                1. <strong>Identificaci√≥n:</strong> Localizar pools de liquidez<br>
                2. <strong>Manipulaci√≥n:</strong> Movimiento falso hacia liquidez<br>
                3. <strong>Sweep:</strong> Activaci√≥n r√°pida de stops<br>
                4. <strong>Reversi√≥n:</strong> Movimiento hacia direcci√≥n real<br><br>
                
                <strong>‚ö†Ô∏è Se√±ales de Barrido:</strong><br>
                ‚Ä¢ Wicks largos en extremos<br>
                ‚Ä¢ Rechazo inmediato<br>
                ‚Ä¢ Volumen alto en la activaci√≥n<br>
                ‚Ä¢ Retorno r√°pido al rango<br><br>
                
                ¬øTe interesa aprender sobre Liquidity Void (LV) y Liquidity Sweep patterns?
            `;
        }

        function generateFVGResponse() {
            return `
                ‚ö° <strong>Fair Value Gaps (FVG) - Ineficiencias del Mercado</strong><br><br>
                
                Los FVGs son espacios donde el precio se movi√≥ tan r√°pido que cre√≥ desequilibrio:<br><br>
                
                <strong>üîç Identificaci√≥n:</strong><br>
                ‚Ä¢ Gap entre high de vela 1 y low de vela 3<br>
                ‚Ä¢ Vela 2 no debe solapar completamente el gap<br>
                ‚Ä¢ Causado por movimiento institucional r√°pido<br>
                ‚Ä¢ M√≠nimo 10-15 pips en majors<br><br>
                
                <strong>üìä Tipos de FVG:</strong><br>
                ‚Ä¢ <strong>Bullish FVG:</strong> Gap hacia arriba, act√∫a como soporte<br>
                ‚Ä¢ <strong>Bearish FVG:</strong> Gap hacia abajo, act√∫a como resistencia<br>
                ‚Ä¢ <strong>Consequent Encroachment:</strong> Punto medio del FVG (50%)<br><br>
                
                <strong>‚öôÔ∏è Estados del FVG:</strong><br>
                1. <strong>Open:</strong> Sin mitigar, m√°xima fuerza<br>
                2. <strong>Partially Filled:</strong> Tocado pero no completamente<br>
                3. <strong>Filled:</strong> Completamente mitigado<br>
                4. <strong>Inversi√≥n:</strong> Cambia de soporte a resistencia<br><br>
                
                <strong>üìà Trading FVGs:</strong><br>
                ‚Ä¢ <strong>Entry:</strong> En el 50% del FVG (CE)<br>
                ‚Ä¢ <strong>SL:</strong> Por debajo/encima del FVG completo<br>
                ‚Ä¢ <strong>TP:</strong> Siguiente liquidez o FVG opuesto<br>
                ‚Ä¢ <strong>Confluencia:</strong> Combinar con OBs y estructura<br><br>
                
                <strong>üéØ Reglas Importantes:</strong><br>
                ‚Ä¢ Timeframe superior tiene m√°s peso<br>
                ‚Ä¢ FVGs recientes son m√°s fuertes<br>
                ‚Ä¢ Buscar FVGs en displacement moves<br>
                ‚Ä¢ No todos los gaps son FVGs v√°lidos<br><br>
                
                ¬øQuieres que te ense√±e sobre Volume Imbalance y Liquidity Voids?
            `;
        }

        function generateSMCResponse() {
            return `
                üß† <strong>Smart Money Concepts - Pensando como Instituciones</strong><br><br>
                
                SMC es la metodolog√≠a para entender c√≥mo operan las instituciones:<br><br>
                
                <strong>üèõÔ∏è Smart Money vs Retail:</strong><br>
                ‚Ä¢ <strong>Smart Money:</strong> Bancos, fondos, instituciones con billones<br>
                ‚Ä¢ <strong>Retail:</strong> Traders individuales con capital limitado<br>
                ‚Ä¢ Instituciones necesitan liquidez retail para sus posiciones<br><br>
                
                <strong>üîÑ Ciclo SMC:</strong><br>
                1. <strong>Accumulation:</strong> Instituciones compran gradualmente<br>
                2. <strong>Manipulation:</strong> Movimientos falsos para liquidez<br>
                3. <strong>Distribution:</strong> Instituciones venden a retail<br><br>
                
                <strong>üìä Estructura de Mercado:</strong><br>
                ‚Ä¢ <strong>Uptrend:</strong> Higher Highs + Higher Lows<br>
                ‚Ä¢ <strong>Downtrend:</strong> Lower Highs + Lower Lows<br>
                ‚Ä¢ <strong>BOS:</strong> Break of Structure = cambio de tendencia<br>
                ‚Ä¢ <strong>CHoCH:</strong> Change of Character = debilidad<br><br>
                
                <strong>üéØ Conceptos Clave:</strong><br>
                ‚Ä¢ <strong>Inducement:</strong> Se√±uelo para atraer retail<br>
                ‚Ä¢ <strong>Liquidity Grab:</strong> Barrido de stops<br>
                ‚Ä¢ <strong>Premium/Discount:</strong> Precio caro vs barato<br>
                ‚Ä¢ <strong>Market Structure Shift:</strong> Cambio de control<br><br>
                
                ¬øTe gustar√≠a profundizar en alg√∫n concepto espec√≠fico de SMC?
            `;
        }

        function generateICTResponse() {
            return `
                üéì <strong>Inner Circle Trader (ICT) - Metodolog√≠a Institucional</strong><br><br>
                
                ICT es un enfoque completo para entender los mercados desde perspectiva institucional:<br><br>
                
                <strong>‚è∞ Timing del Mercado:</strong><br>
                ‚Ä¢ <strong>Kill Zones:</strong> 8-10am, 1-3pm, 6-8pm NYC<br>
                ‚Ä¢ <strong>Silver Bullet:</strong> Setups de alta probabilidad<br>
                ‚Ä¢ <strong>Power of Three:</strong> Acumulaci√≥n, Manipulaci√≥n, Distribuci√≥n<br>
                ‚Ä¢ <strong>Turtle Soup:</strong> Falla de breakout para reversi√≥n<br><br>
                
                <strong>üéØ Conceptos Fundamentales:</strong><br>
                ‚Ä¢ <strong>Order Blocks:</strong> Zonas de √≥rdenes institucionales<br>
                ‚Ä¢ <strong>Fair Value Gaps:</strong> Ineficiencias a rellenar<br>
                ‚Ä¢ <strong>Liquidity Pools:</strong> Donde est√°n los stops<br>
                ‚Ä¢ <strong>Market Structure:</strong> HH/HL vs LL/LH<br><br>
                
                <strong>üìà Metodolog√≠a de Trading:</strong><br>
                1. <strong>Bias:</strong> Direcci√≥n desde timeframe superior<br>
                2. <strong>Entry:</strong> Zona de valor (OB, FVG, Breaker)<br>
                3. <strong>Confirmation:</strong> Cambio de estructura menor<br>
                4. <strong>Execution:</strong> En menor timeframe<br><br>
                
                <strong>üîÑ Tipos de Setups:</strong><br>
                ‚Ä¢ <strong>Breaker:</strong> OB roto que cambia polaridad<br>
                ‚Ä¢ <strong>Mitigation:</strong> Retorno a zona institucional<br>
                ‚Ä¢ <strong>Optimal Trade Entry:</strong> 62-70% de rango<br>
                ‚Ä¢ <strong>Judas Swing:</strong> Falsa direcci√≥n inicial<br><br>
                
                ¬øQuieres que profundice en alguna metodolog√≠a espec√≠fica de ICT?
            `;
        }

        function generateStructureResponse() {
            return `
                üèóÔ∏è <strong>Estructura de Mercado - La Base del An√°lisis</strong><br><br>
                
                La estructura es lo que nos dice qui√©n controla el mercado:<br><br>
                
                <strong>üìä Tendencias Definidas:</strong><br>
                ‚Ä¢ <strong>Alcista:</strong> Higher Highs (HH) + Higher Lows (HL)<br>
                ‚Ä¢ <strong>Bajista:</strong> Lower Highs (LH) + Lower Lows (LL)<br>
                ‚Ä¢ <strong>Lateral:</strong> Equal Highs/Lows en rango<br><br>
                
                <strong>‚ö° Cambios de Estructura:</strong><br>
                ‚Ä¢ <strong>BOS (Break of Structure):</strong> Confirmaci√≥n de cambio<br>
                ‚Ä¢ <strong>CHoCH (Change of Character):</strong> Primera se√±al de debilidad<br>
                ‚Ä¢ <strong>MSS (Market Structure Shift):</strong> Cambio definitivo<br><br>
                
                <strong>üéØ Puntos Clave:</strong><br>
                ‚Ä¢ <strong>Swing Highs/Lows:</strong> Extremos relevantes<br>
                ‚Ä¢ <strong>Internal Structure:</strong> Movimientos menores<br>
                ‚Ä¢ <strong>External Structure:</strong> Tendencia principal<br>
                ‚Ä¢ <strong>Multi-timeframe:</strong> Coherencia entre marcos<br><br>
                
                <strong>üîç Identificaci√≥n:</strong><br>
                1. Marca swing points relevantes<br>
                2. Conecta highs y lows consecutivos<br>
                3. Identifica patrones de continuaci√≥n/reversi√≥n<br>
                4. Confirma en m√∫ltiples timeframes<br><br>
                
                ¬øTe gustar√≠a aprender sobre Structure-based entries y exits?
            `;
        }

        function generateEntryResponse() {
            return `
                üéØ <strong>Puntos de Entrada - Maximizando Probabilidades</strong><br><br>
                
                Los mejores entries combinan m√∫ltiples conceptos ICT/SMC:<br><br>
                
                <strong>üìç Zonas de Valor:</strong><br>
                ‚Ä¢ <strong>Order Blocks:</strong> 50-75% del bloque<br>
                ‚Ä¢ <strong>Fair Value Gaps:</strong> Consequent encroachment (50%)<br>
                ‚Ä¢ <strong>Breaker Blocks:</strong> Zona de inversi√≥n de polaridad<br>
                ‚Ä¢ <strong>Mitigation Blocks:</strong> Retorno a zona no mitigada<br><br>
                
                <strong>‚öôÔ∏è Confirmaciones:</strong><br>
                ‚Ä¢ <strong>Change of Character:</strong> En timeframe menor<br>
                ‚Ä¢ <strong>Displacement:</strong> Movimiento explosivo<br>
                ‚Ä¢ <strong>Liquidity Sweep:</strong> Barrido antes de reversi√≥n<br>
                ‚Ä¢ <strong>Rejection:</strong> Wicks largos en zona<br><br>
                
                <strong>üïê Timing Optimal:</strong><br>
                ‚Ä¢ <strong>Kill Zones:</strong> Londres (8-10am), Nueva York (1-3pm)<br>
                ‚Ä¢ <strong>Session Opens:</strong> Primeras 2-3 horas<br>
                ‚Ä¢ <strong>Silver Bullet:</strong> 10-11am, 2-3pm, 6-7pm EST<br><br>
                
                <strong>üìà Proceso de Entry:</strong><br>
                1. <strong>Bias:</strong> Direcci√≥n desde TF superior<br>
                2. <strong>Zona:</strong> Identificar √°rea de valor<br>
                3. <strong>Trigger:</strong> Confirmaci√≥n en TF menor<br>
                4. <strong>Entry:</strong> Orden l√≠mite o mercado<br>
                5. <strong>Gesti√≥n:</strong> SL, TP y gesti√≥n<br><br>
                
                ¬øQuieres que detalle alg√∫n tipo espec√≠fico de setup de entrada?
            `;
        }

        function generateRiskResponse() {
            return `
                ‚ö†Ô∏è <strong>Gesti√≥n de Riesgo - Protegiendo el Capital</strong><br><br>
                
                La gesti√≥n de riesgo es lo que separa a traders exitosos de los que fallan:<br><br>
                
                <strong>üí∞ Reglas de Posici√≥n:</strong><br>
                ‚Ä¢ <strong>Risk per Trade:</strong> M√°ximo 1-2% del capital<br>
                ‚Ä¢ <strong>Position Size:</strong> Basado en distancia al SL<br>
                ‚Ä¢ <strong>R:R Ratio:</strong> M√≠nimo 1:2, ideal 1:3 o m√°s<br>
                ‚Ä¢ <strong>Max Drawdown:</strong> No m√°s del 10-15%<br><br>
                
                <strong>üõ°Ô∏è Stop Loss Placement:</strong><br>
                ‚Ä¢ <strong>Order Blocks:</strong> Por debajo/encima del bloque<br>
                ‚Ä¢ <strong>Fair Value Gaps:</strong> Fuera del FVG completo<br>
                ‚Ä¢ <strong>Structure:</strong> Detr√°s de swing highs/lows<br>
                ‚Ä¢ <strong>Liquidity:</strong> Donde no activar√°n tu stop<br><br>
                
                <strong>üéØ Take Profit Strategy:</strong><br>
                ‚Ä¢ <strong>Partial Profits:</strong> 50% en 1:1, resto en 1:3<br>
                ‚Ä¢ <strong>Estructura:</strong> Resistance/support levels<br>
                ‚Ä¢ <strong>Liquidez:</strong> Donde est√° el next pool<br>
                ‚Ä¢ <strong>Extensions:</strong> 127%, 161.8% Fibonacci<br><br>
                
                <strong>üìä Trade Management:</strong><br>
                ‚Ä¢ <strong>Break Even:</strong> Mover SL a entrada en 1:1<br>
                ‚Ä¢ <strong>Trailing:</strong> Seguir estructura con SL<br>
                ‚Ä¢ <strong>Scale Out:</strong> Reducir posici√≥n gradualmente<br>
                ‚Ä¢ <strong>Add-ons:</strong> Solo con confirmation<br><br>
                
                ¬øTe gustar√≠a aprender sobre psychology del trading y discipline?
            `;
        }

        function generateGeneralResponse(query) {
            const responses = [
                `
                    ü§ñ Basado en tu consulta sobre "${query}", puedo ayudarte con varios aspectos:<br><br>
                    
                    <strong>üìö Conceptos Disponibles:</strong><br>
                    ‚Ä¢ 120+ conceptos ICT especializados<br>
                    ‚Ä¢ 85+ conceptos SMC fundamentales<br>
                    ‚Ä¢ An√°lisis multi-timeframe<br>
                    ‚Ä¢ Estrategias de entry/exit<br>
                    ‚Ä¢ Gesti√≥n de riesgo avanzada<br><br>
                    
                    <strong>üéØ Puedes preguntarme sobre:</strong><br>
                    ‚Ä¢ Order Blocks y Breaker Blocks<br>
                    ‚Ä¢ Fair Value Gaps e Imbalances<br>
                    ‚Ä¢ Liquidity Concepts y Sweeps<br>
                    ‚Ä¢ Market Structure Analysis<br>
                    ‚Ä¢ Smart Money vs Retail behavior<br><br>
                    
                    ¬øHay alg√∫n concepto espec√≠fico que te interese explorar?
                `,
                `
                    üí° Veo que est√°s interesado en "${query}". Te puedo ayudar con:<br><br>
                    
                    <strong>üîç An√°lisis T√©cnico Avanzado:</strong><br>
                    ‚Ä¢ Identificaci√≥n de zonas institucionales<br>
                    ‚Ä¢ Timing de mercado con Kill Zones<br>
                    ‚Ä¢ Setups de alta probabilidad<br>
                    ‚Ä¢ Confirmaciones multi-timeframe<br><br>
                    
                    <strong>‚ö° Metodolog√≠as Especializadas:</strong><br>
                    ‚Ä¢ ICT Core Concepts<br>
                    ‚Ä¢ SMC Trading Approach<br>
                    ‚Ä¢ Institutional Order Flow<br>
                    ‚Ä¢ Market Maker Psychology<br><br>
                    
                    ¬øTe gustar√≠a que profundice en alguna metodolog√≠a espec√≠fica?
                `
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // Preguntar sobre concepto espec√≠fico
        function askAboutConcept(conceptName) {
            const input = document.getElementById('chat-input');
            input.value = `Expl√≠came sobre ${conceptName}`;
            sendMessage();
        }

        // Inicializar cuando la p√°gina carga
        window.addEventListener('load', initializeApp);
    </script>
</body>
</html>